## Storage
k8s_version: v1.29.5
ansible_version: core 2.16.8
tmp_dir: "/SS8/tmp"
offline_dir: "k8s-{{k8s_version}}-offline-files"
local_release_dir: "{{tmp_dir}}/{{offline_dir}}"
download_cache_dir: "{{tmp_dir}}/{{offline_dir}}"
containerd_storage_dir: "{{tmp_dir}}/../lib/containerd"

## Conditions
enable_dual_stack_networks: "{{dual_stack_enabled | default('false') | bool}}"
nat_outgoing_ipv6: "{{enable_dual_stack_networks}}"
download_keep_remote_cache: true
override_system_hostname: false
helm_enabled: 'True'
metrics_server_enabled: true
kube_network_plugin_multus: true
ss8_externaldns: false
calico_network_backend: "bird"
cert_manager_enabled: true
## A port range to reserve for services with NodePort visibility. Override kube api-server nodeport range default is "30000-32767"
kube_apiserver_node_port_range: "20-60000"

tls_cipher_suites:
  - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
  - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
  - TLS_AES_256_GCM_SHA384
  - TLS_CHACHA20_POLY1305_SHA256
  - TLS_AES_128_GCM_SHA256

auto_renew_certificates: true
# First Monday of each month
auto_renew_certificates_systemd_calendar: "Mon *-*-1,2,3,4,5,6,7 03:{{ groups['kube_control_plane'].index(inventory_hostname) }}0:00"

## NTP Settings
# Start the ntpd or chrony service and enable it at system boot.
ntp_enabled: true
ntp_manage_config: true
ntp_servers: "{{groups['ntp']|default([])}}"

#override default value '169.254.25.10' given in inventory/sample/group_vars/k8s_cluster/k8s-cluster.yml
nodelocaldns_ip: 10.233.0.10

# Registries defined within containerd.
containerd_use_config_path: true
registry_mirror: "{{ registry_endpoint | default('registry-1.docker.io') }}"
containerd_registries_mirrors:
 - prefix: "{{registry_mirror}}"
   mirrors:
    - host: "https://{{registry_mirror}}"
      capabilities: ["pull","push","resolve"]
      skip_verify: true

## Container Registry overrides
registry_host: "{{registry_endpoint}}"
kube_image_repo: "{{ registry_host }}"
gcr_image_repo: "{{ registry_host }}"
github_image_repo: "{{ registry_host }}"
docker_image_repo: "{{ registry_host }}"
quay_image_repo: "{{ registry_host }}"

## Just for MetalLB
metallb_enabled: "{{ ip_pool_range is defined }}"
kube_proxy_strict_arp: "{{ metallb_enabled }}"
metallb_config:
  address_pools:
    primary:
      ip_range: "{{ ip_pool_range.split(',') | list }}"
      auto_assign: true
      avoid_buggy_ips: true
  layer2:
  - primary

#End: cvar.yaml

